<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Carnivore Protein Calculator</title>
  <!-- SEO Metadata -->
  <meta name="description" content="Calculate exactly how much meat you need to hit your protein goals on a carnivore diet. Get raw and cooked weights for beef, poultry, pork, lamb, and fish.">
  <meta name="keywords" content="carnivore diet, protein calculator, meat calculator, carnivore protein, keto protein, low carb, meat nutrition, protein requirements">
  <meta name="author" content="Tallow & Grace">
  <link rel="canonical" href="https://calculator.tallowandgrace.com">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/images/logo.png">
  <link rel="apple-touch-icon" href="/images/logo.png">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://calculator.tallowandgrace.com">
  <meta property="og:title" content="Carnivore Protein Calculator | Tallow & Grace">
  <meta property="og:description" content="Calculate exactly how much meat you need to reach your protein goals. Find protein amounts for various meats including beef, pork, poultry, lamb, and fish.">
  <meta property="og:image" content="https://calculator.tallowandgrace.com/images/social.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://calculator.tallowandgrace.com">
  <meta property="twitter:title" content="Carnivore Protein Calculator | Tallow & Grace">
  <meta property="twitter:description" content="Calculate exactly how much meat you need to reach your protein goals. Find protein amounts for various meats including beef, pork, poultry, lamb, and fish.">
  <meta property="twitter:image" content="https://calculator.tallowandgrace.com/images/social.png">

  <!-- Mobile optimization -->
  <meta name="theme-color" content="#8b5e3c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Tallow & Grace Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Lora:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-color: #fdf6f1;
      --card-bg: #fffaf2;
      --accent: #7a4a2c;
      --accent-light: #c29c7a;
      --text-color: #2c2c2c;
      --header-bg: #f1e7dd;
      --footer-bg: #f1e7dd;
      --input-bg: #fff;
      --input-border: #ccc;
      --button-text: #fff;
      --scroll-thumb: #7a4a2c;
      --scroll-track: #eae0d5;
    }

    body {
      font-family: 'DM Sans', 'Helvetica Neue', sans-serif;
      margin: 0;
      background: var(--bg-color);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      background: var(--header-bg);
      padding: 1.5rem 1rem;
      text-align: center;
      border-bottom: 2px solid var(--accent);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    header img {
      max-height: 40px;
      vertical-align: middle;
      margin-bottom: 0.5rem;
    }

    header h1 {
      margin: 0;
      color: var(--accent);
      font-size: 1.8rem;
      font-family: 'Playfair Display', serif;
    }

    header p {
      margin: 0.5rem 0 0 0;
      font-size: 1rem;
      font-family: 'Lora', serif;
    }

    footer {
      background: var(--footer-bg);
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      border-top: 1px solid var(--accent);
      font-family: 'Lora', serif;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }
  </style>
</head>
<body>
  <header>
    <img src="/images/logo.png" alt="Tallow & Grace logo">
    <h1>Carnivore Protein Calculator</h1>
    <p>Calculate meat portions for any protein goal</p>
  </header>
  <main>
    <div class="intro">
      <p>Welcome! For optimal muscle maintenance and growth, we recommend aiming for <strong>1 gram of protein per pound of desired body weight per day</strong>.</p>
      <p>Use this tool to enter how many grams of protein you want in a meal, and see the raw &amp; cooked weights of popular carnivore-friendly meats.</p>
    </div>

    <div class="collapsible">
      <div class="collapsible-header">
        <span>Learn More About Protein Needs</span>
        <span class="toggle-icon">+</span>
      </div>
      <div class="collapsible-content">
        <h3>Protein Requirements by Goal</h3>
        <p><strong>General health:</strong> 0.8g per kg of body weight (minimum RDA)</p>
        <p><strong>Active individuals:</strong> 1.2-1.7g per kg of body weight</p>
        <p><strong>Strength athletes:</strong> 1.6-2.2g per kg of body weight</p>
        <p><strong>Endurance athletes:</strong> 1.2-1.8g per kg of body weight</p>
        <p><strong>Weight loss:</strong> 1.6-2.2g per kg to preserve muscle mass</p>
        <p><strong>Muscle gain:</strong> 1.6-2.2g per kg, potentially up to 3.3g/kg in caloric surplus</p>
        
        <div class="citation">
          Based on: International Society of Sports Nutrition Position Stand: protein and exercise. Journal of the International Society of Sports Nutrition (2017)
        </div>
        
        <h3>Protein Timing</h3>
        <p>For optimal muscle protein synthesis, distribute protein across 3-5 meals per day, with 20-40g high-quality protein per meal.</p>
        
        <h3>Protein Efficiency</h3>
        <p>Protein efficiency considers how much protein you get relative to calories consumed. Leaner meats generally have higher protein efficiency.</p>
        
        <div class="references">
          <h3>Reference</h3>
          <p>J√§ger, R., Kerksick, C.M., Campbell, B.I. et al. International Society of Sports Nutrition Position Stand: protein and exercise. J Int Soc Sports Nutr 14, 20 (2017).</p>
        </div>
      </div>
    </div>

    <div class="control-panel">
      <div class="input-row">
        <div class="input-group">
          <label for="protein">Protein per meal:</label>
          <input type="number" id="protein" value="30" min="1" max="300" aria-label="Enter target protein in grams">
          <div id="protein-error" class="error-message">Please enter a value between 1-300g</div>
        </div>
      </div>
      
      <div class="unit-group">
        <span class="toggle-label">Units:</span>
        <div class="toggle-wrapper">
          <label class="switch" aria-label="Toggle between grams and ounces">
            <input type="checkbox" id="unit-toggle">
            <span class="slider"></span>
          </label>
          <div class="toggle-labels">
            <span>g</span>
            <span>oz</span>
          </div>
        </div>
      </div>

      <div class="filter-container" role="group" aria-label="Filter by meat type">
        <button class="filter-btn active" data-category="all">All Meats</button>
        <button class="filter-btn" data-category="beef">Beef</button>
        <button class="filter-btn" data-category="poultry">Poultry</button>
        <button class="filter-btn" data-category="pork">Pork</button>
        <button class="filter-btn" data-category="lamb">Lamb</button>
        <button class="filter-btn" data-category="fish">Fish</button>
      </div>

      <div class="search-container">
        <span class="search-icon">üîç</span>
        <input type="text" id="search-meat" placeholder="Search meats..." aria-label="Search for specific meats">
      </div>

      <div class="sort-control">
        <label for="sort-select">Sort by:</label>
        <select id="sort-select" aria-label="Sort results by different criteria">
          <option value="efficiency-desc">Protein Efficiency (High to Low)</option>
          <option value="efficiency-asc">Protein Efficiency (Low to High)</option>
          <option value="name-asc">Name (A to Z)</option>
          <option value="name-desc">Name (Z to A)</option>
          <option value="raw-asc">Raw Weight (Low to High)</option>
          <option value="cooked-asc">Cooked Weight (Low to High)</option>
        </select>
      </div>
    </div>

    <div class="table-container">
      <table id="results" aria-label="Meat protein results">
        <thead>
          <tr>
            <th>Meat</th>
            <th id="raw-weight-header">Raw (g)</th>
            <th id="cooked-weight-header">Cooked (g)</th>
            <th>Efficiency <span class="tooltip" aria-label="Information about protein efficiency" tabindex="0">i</span></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Tooltip content container (separate from the table for better mobile display) -->
    <div id="tooltip-container"></div>

    <button id="export-btn" class="export-btn" aria-label="Export results to clipboard">
      <span>Copy Results</span>
    </button>
  </main>
  <footer>
    <p>Questions or suggestions? Email <a href="mailto:mama@tallowandgrace.com">mama@tallowandgrace.com</a>.</p>
    <p>Read more about carnivore and clean living at <a href="https://tallowandgrace.com" target="_blank">tallowandgrace.com</a>.</p>
  </footer>
  <script>
    // Enhanced meat data with categories, fat content, calories, and mercury levels for fish
    const meats = [
      { name: "Ground Beef (85/15)", rawProt: 18.6, cookedProt: 25.9, category: "beef", fat: 15.0, calories: 212 },
      { name: "Sirloin Steak", rawProt: 20.3, cookedProt: 26.1, category: "beef", fat: 12.7, calories: 196 },
      { name: "Beef Tenderloin", rawProt: 22.1, cookedProt: 27.5, category: "beef", fat: 13.5, calories: 213 },
      { name: "Beef Liver", rawProt: 20.4, cookedProt: 29.1, category: "beef", fat: 3.6, calories: 135 },
      { name: "Lamb Liver", rawProt: 20.4, cookedProt: 26.1, category: "lamb", fat: 7.5, calories: 157 },
      { name: "Catfish", rawProt: 15.6, cookedProt: 18.2, category: "fish", fat: 7.8, calories: 132, mercury: { level: "Low", ppm: "0.05-0.15" } },
      { name: "Salmon", rawProt: 20.0, cookedProt: 22.4, category: "fish", fat: 13.4, calories: 208, mercury: { level: "Very Low", ppm: "0.01-0.09" } },
      { name: "Pacific Cod", rawProt: 17.9, cookedProt: 17.0, category: "fish", fat: 0.7, calories: 82, mercury: { level: "Low", ppm: "0.05-0.15" } },
      { name: "Mackerel", rawProt: 19.3, cookedProt: 22.6, category: "fish", fat: 15.1, calories: 205, mercury: { level: "Medium-High", ppm: "0.3-0.7" } },
      { name: "Herring", rawProt: 17.4, cookedProt: 23.1, category: "fish", fat: 9.0, calories: 158, mercury: { level: "Very Low", ppm: "0.01-0.04" } },
      { name: "Pork Chop", rawProt: 20.9, cookedProt: 27.1, category: "pork", fat: 9.2, calories: 172 },
      { name: "Turkey Breast", rawProt: 22.5, cookedProt: 30.1, category: "poultry", fat: 0.7, calories: 104 },
      { name: "Lean Beef Brisket", rawProt: 21.2, cookedProt: 29.6, category: "beef", fat: 6.5, calories: 155 },
      { name: "Flat Iron Steak", rawProt: 20.5, cookedProt: 23.0, category: "beef", fat: 10.2, calories: 180 },
      { name: "Chicken Breast", rawProt: 23.1, cookedProt: 31.0, category: "poultry", fat: 3.6, calories: 165 },
      { name: "Chicken Thigh", rawProt: 18.6, cookedProt: 25.9, category: "poultry", fat: 9.2, calories: 177 },
      { name: "Lamb Shoulder", rawProt: 17.8, cookedProt: 22.4, category: "lamb", fat: 16.5, calories: 233 },
      { name: "Lamb Leg", rawProt: 19.2, cookedProt: 25.6, category: "lamb", fat: 12.7, calories: 194 },
      { name: "Ground Lamb", rawProt: 17.5, cookedProt: 27.1, category: "lamb", fat: 17.1, calories: 234 },
      { name: "Ribeye Steak", rawProt: 20.2, cookedProt: 26.0, category: "beef", fat: 22.0, calories: 291 },
      // New fish additions
      { name: "Pollock", rawProt: 19.0, cookedProt: 20.0, category: "fish", fat: 1.0, calories: 90, mercury: { level: "Low", ppm: "0.05-0.15" } },
      { name: "Haddock", rawProt: 20.0, cookedProt: 24.0, category: "fish", fat: 0.8, calories: 90, mercury: { level: "Low", ppm: "0.05-0.15" } },
      { name: "Flounder/Sole", rawProt: 18.0, cookedProt: 19.5, category: "fish", fat: 1.2, calories: 85, mercury: { level: "Low", ppm: "0.05-0.15" } },
      { name: "Whiting", rawProt: 18.0, cookedProt: 20.0, category: "fish", fat: 1.0, calories: 90, mercury: { level: "Low", ppm: "0.05-0.15" } },
      { name: "Lake Whitefish", rawProt: 19.0, cookedProt: 21.0, category: "fish", fat: 7.2, calories: 135, mercury: { level: "Low", ppm: "0.05-0.15" } }
    ];

    // Add protein efficiency calculation (protein per 100 calories)
    meats.forEach(meat => {
      meat.efficiency = (meat.rawProt / meat.calories) * 100;
    });

    // DOM Elements
    const proteinInput = document.getElementById("protein");
    const unitToggle = document.getElementById("unit-toggle");
    const filterButtons = document.querySelectorAll(".filter-btn");
    const sortSelect = document.getElementById("sort-select");
    const searchInput = document.getElementById("search-meat");
    const tbody = document.querySelector("#results tbody");
    const exportBtn = document.getElementById("export-btn");
    const collapsibleHeader = document.querySelector(".collapsible-header");
    const collapsibleContent = document.querySelector(".collapsible-content");
    const proteinError = document.getElementById("protein-error");
    const tooltipContainer = document.getElementById("tooltip-container");
    const rawWeightHeader = document.getElementById("raw-weight-header");
    const cookedWeightHeader = document.getElementById("cooked-weight-header");

    // Conversion functions
    function gramsToOz(g) {
      return (g / 28.3495).toFixed(1);
    }

    function ozToGrams(oz) {
      return (oz * 28.3495).toFixed(0);
    }

    // Format weight based on unit preference - showing only selected unit
    function formatWeight(grams, showOz) {
      if (showOz) {
        const oz = gramsToOz(grams);
        return `${oz} oz`;
      } else {
        return `${grams.toFixed(0)} g`;
      }
    }

    // Update table headers based on selected unit - using shorter text
    function updateTableHeaders(showOz) {
      if (showOz) {
        rawWeightHeader.textContent = "Raw (oz)";
        cookedWeightHeader.textContent = "Cooked (oz)";
      } else {
        rawWeightHeader.textContent = "Raw (g)";
        cookedWeightHeader.textContent = "Cooked (g)";
      }
    }

    // Get efficiency class based on value
    function getEfficiencyClass(efficiency) {
      if (efficiency > 10) return "efficiency-high";
      if (efficiency > 7) return "efficiency-medium";
      return "efficiency-low";
    }

    // Get mercury level class
    function getMercuryClass(level) {
      if (!level) return "";
      if (level.includes("Very Low")) return "mercury-verylow";
      if (level.includes("Low")) return "mercury-low";
      if (level.includes("Medium")) return "mercury-medium";
      if (level.includes("High")) return "mercury-high";
      if (level.includes("Very High")) return "mercury-veryhigh";
      return "";
    }

    // Function to create a table row with clean data
    function createTableRow(meatData, rawWeight, cookedWeight, efficiency, showOz) {
      const row = document.createElement("tr");
      
      // Calculate calories in this portion
      const portionCalories = (rawWeight / 100 * meatData.calories).toFixed(0);
      const portionFat = (rawWeight / 100 * meatData.fat).toFixed(1);
      
      // Create tooltip content with mercury info for fish
      let tooltipContent = `
        Fat: ${portionFat}g<br>
        Calories: ${portionCalories} kcal<br>
        Portion has ${proteinInput.value}g protein
      `;
      
      // Add mercury information for fish
      if (meatData.category === "fish" && meatData.mercury) {
        const mercuryClass = getMercuryClass(meatData.mercury.level);
        tooltipContent += `<br><br>Mercury: <span class="${mercuryClass}">${meatData.mercury.level}</span> (${meatData.mercury.ppm} ppm)`;
      }
      
      // Add category icon
      const iconSpan = document.createElement("span");
      iconSpan.className = `meat-icon icon-${meatData.category}`;
      iconSpan.setAttribute("aria-label", meatData.category);
      
      // Create the name cell
      const nameCell = document.createElement("td");
      nameCell.appendChild(iconSpan);
      nameCell.appendChild(document.createTextNode(meatData.name));
      
      // Create tooltip
      const tooltip = document.createElement("span");
      tooltip.className = "tooltip";
      tooltip.setAttribute("data-content", tooltipContent);
      tooltip.setAttribute("tabindex", "0");
      tooltip.textContent = "i";
      nameCell.appendChild(tooltip);
      
      // Create raw weight cell
      const rawWeightCell = document.createElement("td");
      rawWeightCell.textContent = formatWeight(rawWeight, showOz);
      
      // Create cooked weight cell
      const cookedWeightCell = document.createElement("td");
      cookedWeightCell.textContent = formatWeight(cookedWeight, showOz);
      
      // Create efficiency cell
      const efficiencyCell = document.createElement("td");
      efficiencyCell.className = getEfficiencyClass(efficiency);
      efficiencyCell.textContent = efficiency.toFixed(1);
      
      // Add all cells to the row
      row.appendChild(nameCell);
      row.appendChild(rawWeightCell);
      row.appendChild(cookedWeightCell);
      row.appendChild(efficiencyCell);
      
      // Store the clean meat name as a data attribute for export
      row.setAttribute('data-meat-name', meatData.name);
      
      return row;
    }

    // Handle tooltips
    function setupTooltips() {
      // Clean up any existing tooltips
      const oldTooltips = document.querySelectorAll('.tooltip-content');
      oldTooltips.forEach(t => t.remove());
      
      // Setup header tooltip
      const headerTooltip = document.querySelector('th .tooltip');
      if (headerTooltip) {
        const tooltipContent = document.createElement('div');
        tooltipContent.className = 'tooltip-content';
        tooltipContent.textContent = 'Protein per calorie (g/100 kcal). Higher is better for weight management.';
        tooltipContainer.appendChild(tooltipContent);
        
        function showHeaderTooltip(e) {
          const rect = headerTooltip.getBoundingClientRect();
          tooltipContent.style.display = 'block';
          
          // Position it centered below the tooltip icon
          tooltipContent.style.top = `${rect.bottom + 5}px`;
          tooltipContent.style.left = `${rect.left - 70}px`;
        }
        
        function hideHeaderTooltip() {
          tooltipContent.style.display = 'none';
        }
        
        headerTooltip.addEventListener('click', showHeaderTooltip);
        headerTooltip.addEventListener('mouseenter', showHeaderTooltip);
        headerTooltip.addEventListener('mouseleave', hideHeaderTooltip);
        headerTooltip.addEventListener('focus', showHeaderTooltip);
        headerTooltip.addEventListener('blur', hideHeaderTooltip);
      }
      
      // Setup meat info tooltips
      const meatTooltips = document.querySelectorAll('td .tooltip');
      meatTooltips.forEach(tooltip => {
        tooltip.addEventListener('click', function(e) {
          // Remove any existing active tooltips
          document.querySelectorAll('.tooltip-content.active').forEach(t => t.remove());
          
          const content = tooltip.getAttribute('data-content');
          const tooltipContent = document.createElement('div');
          tooltipContent.className = 'tooltip-content active';
          tooltipContent.innerHTML = content;
          
          tooltipContainer.appendChild(tooltipContent);
          
          // Position tooltip
          const rect = tooltip.getBoundingClientRect();
          tooltipContent.style.display = 'block';
          tooltipContent.style.top = `${rect.top - tooltipContent.offsetHeight - 10}px`;
          
          // Adjust horizontal position to make sure it stays on screen
          let leftPos = rect.left - (tooltipContent.offsetWidth / 2) + (rect.width / 2);
          const rightEdge = leftPos + tooltipContent.offsetWidth;
          const viewportWidth = window.innerWidth;
          
          if (rightEdge > viewportWidth - 10) {
            leftPos = viewportWidth - tooltipContent.offsetWidth - 10;
          }
          if (leftPos < 10) {
            leftPos = 10;
          }
          
          tooltipContent.style.left = `${leftPos}px`;
          
          // Close when clicking elsewhere
          const closeTooltip = function(event) {
            if (!tooltipContent.contains(event.target) && event.target !== tooltip) {
              tooltipContent.remove();
              document.removeEventListener('click', closeTooltip);
            }
          };
          
          // Use setTimeout to avoid immediate closure
          setTimeout(() => {
            document.addEventListener('click', closeTooltip);
          }, 10);
          
          e.stopPropagation();
        });
      });
    }

    // Calculate and display results
    function calculate() {
      const target = parseFloat(proteinInput.value) || 0;
      
      // Input validation
      if (target < 1 || target > 300) {
        proteinError.style.display = "block";
        return;
      } else {
        proteinError.style.display = "none";
      }

      const showOz = unitToggle.checked;
      const selectedCategory = document.querySelector(".filter-btn.active").dataset.category;
      const searchQuery = searchInput.value.toLowerCase();
      const sortCriteria = sortSelect.value;
      
      // Update table headers based on selected unit
      updateTableHeaders(showOz);

      // Filter meats based on category and search
      let filteredMeats = meats.filter(meat => {
        const categoryMatch = selectedCategory === "all" || meat.category === selectedCategory;
        const searchMatch = meat.name.toLowerCase().includes(searchQuery);
        return categoryMatch && searchMatch;
      });

      // Calculate weights
      let results = filteredMeats.map(meat => {
        const rawG = target / meat.rawProt * 100;
        const cookedG = target / meat.cookedProt * 100;
        return {
          name: meat.name,
          category: meat.category,
          rawG: rawG,
          cookedG: cookedG,
          efficiency: meat.efficiency,
          fat: meat.fat,
          calories: meat.calories,
          mercury: meat.mercury
        };
      });

      // Sort results
      switch (sortCriteria) {
        case "efficiency-desc":
          results.sort((a, b) => b.efficiency - a.efficiency);
          break;
        case "efficiency-asc":
          results.sort((a, b) => a.efficiency - b.efficiency);
          break;
        case "name-asc":
          results.sort((a, b) => a.name.localeCompare(b.name));
          break;
        case "name-desc":
          results.sort((a, b) => b.name.localeCompare(a.name));
          break;
        case "raw-asc":
          results.sort((a, b) => a.rawG - b.rawG);
          break;
        case "cooked-asc":
          results.sort((a, b) => a.cookedG - b.cookedG);
          break;
      }

      // Clear previous results
      tbody.innerHTML = "";

      // Render results using our new createTableRow helper
      results.forEach(r => {
        const meat = meats.find(m => m.name === r.name);
        const row = createTableRow(
          meat, 
          r.rawG, 
          r.cookedG, 
          r.efficiency,
          showOz
        );
        tbody.appendChild(row);
      });
      
      // Setup tooltips after rendering the table
      setupTooltips();
    }

    // Event Listeners
    proteinInput.addEventListener("input", calculate);
    
    unitToggle.addEventListener("change", calculate);
    
    filterButtons.forEach(button => {
      button.addEventListener("click", function() {
        filterButtons.forEach(btn => btn.classList.remove("active"));
        this.classList.add("active");
        calculate();
      });
    });
    
    sortSelect.addEventListener("change", calculate);
    
    searchInput.addEventListener("input", calculate);
    
    // Updated export function that uses the data attributes
    exportBtn.addEventListener("click", function() {
      // Create a string of the results
      let resultText = "Carnivore Protein Calculator Results\n\n";
      resultText += `Protein per meal: ${proteinInput.value}g\n\n`;
      
      const unit = unitToggle.checked ? "oz" : "g";
      resultText += `All weights in ${unit}\n\n`;
      
      const rows = tbody.querySelectorAll("tr");
      rows.forEach(row => {
        const meatName = row.getAttribute('data-meat-name');
        const cells = row.querySelectorAll("td");
        const rawWeight = cells[1].textContent;
        const cookedWeight = cells[2].textContent;
        
        resultText += `${meatName}: Raw: ${rawWeight}, Cooked: ${cookedWeight}\n`;
      });
      
      // Copy to clipboard
      navigator.clipboard.writeText(resultText)
        .then(() => {
          exportBtn.textContent = "‚úì Copied!";
          setTimeout(() => {
            exportBtn.innerHTML = "<span>Copy Results</span>";
          }, 2000);
        })
        .catch(err => {
          console.error('Could not copy text: ', err);
          exportBtn.textContent = "Error copying!";
          setTimeout(() => {
            exportBtn.innerHTML = "<span>Copy Results</span>";
          }, 2000);
        });
    });
    
    // Collapsible section
    collapsibleHeader.addEventListener("click", function() {
      const isOpen = collapsibleContent.style.display === "block";
      collapsibleContent.style.display = isOpen ? "none" : "block";
      document.querySelector(".toggle-icon").textContent = isOpen ? "+" : "‚àí";
    });

    // Initialize calculations on page load
    window.addEventListener("load", calculate);
  </script>
</body>
</html>
